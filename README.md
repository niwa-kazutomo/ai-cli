# AI CLI

このプロジェクトは Claude Code と Codex CLI を連携し、より高品質なコード生成を実現するためのツールです。

## ワークフロー

本ツールは以下に示すワークフローを自動化することを目的としています。

1. ユーザーがコマンドラインからプロンプトを入力
2. プランモードでコード生成の計画を立てる
3. 作成された計画のレビューを実施
4. レビューの結果を受け取り、必要に応じてコード生成の計画を修正
5. 計画のレビュワーが計画に合意する(P3以上の懸念事項がなくなる)まで、3-4を繰り返す
6. 完成した計画をユーザーへ提示して、同意を求める
7. ユーザーが同意したら、コード生成を実行
8. git 差分のコードレビューを依頼し、レビュー結果を受け取る
9. レビュー結果を元にコードを修正
10. コードレビュワーのコードへの指摘がなくなる(P3以上の懸念事項がなくなる)まで、8-9を繰り返す
11. ユーザーへコード生成の完了を通知

## 各LLMの責務

プラン生成: Claude Code
プランレビュワー: Codex
コード生成: Claude Code
コードレビュワー: Codex

## 使い方

1. プロジェクトのルートディレクトリで、以下のコマンドを実行してプロンプトを入力します。
   ```bash
   ai plan "ユーザーストーリーやタスクの説明"
   ```
   
2. プラン生成とレビューのプロセスが自動的に開始されます。レビュワーが計画に合意するまで、プラン生成とレビューのプロセスが繰り返されます。

3. 計画が完成し、ユーザーが同意するとコード生成が開始されます。コード生成の完了後、コードレビューが自動的に依頼されます。

4. コードレビュワーがコードに対して指摘を行い、指摘がなくなるまでコードの修正とレビューのプロセスが繰り返されます。

## 注意事項

- Claude Code / Codex 共に、セッションIDはワークフロー 1 の時点で固定し、その後のプロセス全体で同一のセッションIDを使用することで、同一の会話履歴を参照しながらプラン生成やコード生成、レビューを行います。